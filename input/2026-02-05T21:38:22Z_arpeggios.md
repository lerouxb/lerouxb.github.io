---
title: Platform 16 Arpeggios
---

Added an arpeggiator to the new ["two-tone euclidean polymeter"](https://github.com/lerouxb/platform16-firmware/tree/main/firmware/tep) firmware for platform 16 this morning, reusing code from when I made the [fm chord](https://github.com/lerouxb/platform16-firmware/tree/main/firmware/pmd) synth. So you can pick a "degree" in the scale and then it chooses the "right" chord shape for that point in the scale (major, minor, diminished, augmented) and you can arpeggiate the notes in that chord. Various arpeggio algorithms to pick form starting with off where it just plays the chord's root note.

But then in keeping with the vibe of the rest of the firmware, there's a "rhythm" at play where if the note in the rhythm is "high" it advances the arpeggio, otherwise it plays the last note. So depending on the dedensity of the "hits" in the rhythm you either have it always advance or you can play something a bit stochastic or it can just drone and rarely/slowly change the note.

And it automatically doesn't loop often or at least in an obvious way because most of these rhythms and now the arpeggio lengths are likely to be co-prime.

[arpeggio.hpp](https://github.com/lerouxb/platform16-firmware/blob/main/lib/arpeggio.hpp) is mostly vibe-coded. What's interesting is that I spent more time thinking about what I want and writing the instructions than it saved to generate the code. And that's usually the case.

Also added euclidean rhythms the other day and [rhythms.hpp](https://github.com/lerouxb/platform16-firmware/blob/main/lib/rhythms.hpp) is the same story. Although I did generate the vectors for containing the rhythms separately using a JavaScript [script](https://gist.github.com/lerouxb/29b0a430aa6a57d447ca1cb43ee52c0e).

Then the [synthetic clock generator](https://github.com/lerouxb/platform16-firmware/blob/main/lib/inoutclock.hpp) thingy was written by me manually originally then factored out manually, then it vibe-wrote the description. And got it perfectly accurate!

fun!

<div class="video-16-9">
<iframe width="560" height="315" src="https://www.youtube.com/embed/0UYqWQhRu0E?si=45c9JU-LkBdewzhi" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
</div>